<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expedición Galáctica - El Mundo de Chuy</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;700&family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../expedicion-base.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header con navegación -->
        <header class="game-header">
            <h1>🌌 Expedición Galáctica</h1>
            <p style="text-align: center; font-style: italic; color: #7f8c8d; margin: -10px 0 20px 0;">
                San Francisco, Marte y Misterios Marinos
            </p>
            <a href="../../../dashboard/dashboard.html" class="back-button">← Volver al Centro de Mando</a>
        </header>
        
        <!-- Misión de Operaciones -->
        <section class="section" id="math-section">
            <h2 class="math-title">🔢 Misión de Operaciones</h2>
            <div class="grid-container" id="math-grid">
                <!-- Los ejercicios se cargarán dinámicamente -->
            </div>
            <div class="action-area">
                <button class="grade-button math-button" id="grade-math">Calificar Misión</button>
                <div class="results-area" id="math-results"></div>
            </div>
        </section>

        <!-- Misión Kakooma -->
        <section class="section" id="kakooma-section">
            <h2 class="kakooma-title">🧠 Misión Kakooma</h2>
            <p style="text-align: center; margin-bottom: 20px; font-size: 1.1rem; color: #7f8c8d;">
                <strong>¿Cómo jugar?</strong> Haz clic en dos o más números que sumados den el resultado pedido.
            </p>
            <div class="grid-container" id="kakooma-grid">
                <!-- Los puzzles se cargarán dinámicamente -->
            </div>
            <div class="action-area">
                <button class="grade-button kakooma-button" id="grade-kakooma">Calificar Misión</button>
                <div class="results-area" id="kakooma-results"></div>
            </div>
        </section>

        <!-- Misión Geográfica -->
        <section class="section" id="geo-section">
            <h2 class="geo-title">🌍 Misión Geográfica</h2>
            <div class="postcard" id="geo-mission" data-answer="sf">
                <div class="postcard-images">
                    <img src="https://www.visittheusa.mx/sites/default/files/styles/hero_l/public/images/hero_media_image/2017-05/23b0b0b9caaa07ee409b693da9bf9003.jpeg?h=999fdb2a&itok=iMTM-cQw" 
                         alt="Puente Golden Gate en San Francisco" 
                         onerror="this.onerror=null;this.src='https://placehold.co/600x400/333/fff?text=Imagen+no+disponible';">
                    <img src="https://misstourist.com/wp-content/uploads/2020/02/SanFraniscoMap-660x448@2x.jpg" 
                         alt="Mapa de San Francisco" 
                         onerror="this.onerror=null;this.src='https://placehold.co/600x400/333/fff?text=Imagen+no+disponible';">
                </div>
                <div class="postcard-content">
                    <p>"¡Saludos desde una ciudad famosa por sus tranvías y su gran puente rojo! ¿Sabes dónde estoy?"</p>
                    <ul class="multiple-choice-options geo-options" id="geo-options">
                        <!-- Las opciones se cargarán dinámicamente -->
                    </ul>
                </div>
            </div>
            <div class="action-area">
                <button class="grade-button geo-button" id="grade-geo">Calificar Misión</button>
                <div class="results-area" id="geo-results"></div>
            </div>
        </section>

        <!-- Misión Cósmica -->
        <section class="section" id="planet-section">
            <h2 class="planet-title">🪐 Misión Cósmica</h2>
            <div class="cosmic-message" id="planet-mission" data-answer="rojo">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/OSIRIS_Mars_true_color.jpg/1024px-OSIRIS_Mars_true_color.jpg" 
                     alt="Planeta Marte" 
                     class="planet-image" 
                     onerror="this.onerror=null;this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDYwMCA0MDAiPjxyZWN0IHdpZHRoPSI2MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjY2Q1YzVjIi8+PHRleHQgeD0iMzAwIiB5PSIyMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iI2ZmZiI+4p2VIFBsYW5ldGEgTWFydGU8L3RleHQ+PC9zdmc+';">
                <p>Hola, soy Marte. Soy conocido como el Planeta <span class="blank" style="background: rgba(255,255,255,0.3); padding: 5px 15px; border-radius: 10px; border: 2px dashed white;">____</span> porque mi suelo está lleno de hierro oxidado.</p>
                <input type="text" class="answer-input" placeholder="Escribe aquí" style="margin-top: 15px;">
            </div>
            <div class="action-area">
                <button class="grade-button planet-button" id="grade-planet">Calificar Misión</button>
                <div class="results-area" id="planet-results"></div>
            </div>
        </section>

        <!-- Misión Marina -->
        <section class="section" id="animal-section">
            <h2 class="animal-title">🐙 Misión Marina</h2>
            <div class="marine-mystery" id="animal-mission" data-answer="pulpo">
                <div class="silhouette" style="font-size: 4rem; margin-bottom: 15px;">🐙</div>
                <div class="clue-content">
                    <ul class="clues" id="animal-clues">
                        <!-- Las pistas se cargarán dinámicamente -->
                    </ul>
                    <p><strong>¿Qué animal soy?</strong></p>
                    <input type="text" class="answer-input" placeholder="Escribe el animal">
                </div>
            </div>
            <div class="action-area">
                <button class="grade-button animal-button" id="grade-animal">Calificar Misión</button>
                <div class="results-area" id="animal-results"></div>
            </div>
        </section>

        <!-- Misión Numberblocks: Dibujo -->
        <section class="section numberblocks-section" id="numberblocks-section">
            <h2 class="numberblocks-title">🧱 Misión Numberblocks: Dibuja tu Operación</h2>
            <div class="horizontal-op">Dibuja Numberblocks para 4 + 3 = 7</div>
            <div class="canvas-container">
                <canvas id="drawing-canvas"></canvas>
            </div>
            <div class="drawing-tools">
                <button class="drawing-tool color-tool" id="color-red" title="Rojo"></button>
                <button class="drawing-tool color-tool" id="color-blue" title="Azul"></button>
                <button class="drawing-tool color-tool" id="color-yellow" title="Amarillo"></button>
                <button class="drawing-tool color-tool" id="color-green" title="Verde"></button>
                <button class="drawing-tool" id="clear-canvas">Limpiar</button>
                <button class="drawing-tool" id="save-drawing">Guardar Dibujo</button>
            </div>
            <div class="action-area">
                <button class="grade-button" id="grade-numberblocks" style="background: linear-gradient(45deg, #ff9800, #f57c00);">Calificar Dibujo</button>
                <div class="results-area" id="numberblocks-results"></div>
            </div>
        </section>

        <!-- Navegación final -->
        <div id="final-navigation" class="final-navigation hidden">
            <h3>🎉 ¡Expedición Completada!</h3>
            <p>¡Has terminado la Expedición Galáctica! ¿Qué quieres hacer ahora?</p>
            <div class="final-buttons">
                <a href="../../../boveda/boveda.html" class="final-button boveda">📚 Ir a la Bóveda</a>
                <a href="../../../dashboard/dashboard.html" class="final-button dashboard">🏠 Centro de Mando</a>
                <button id="restart-adventure" class="final-button restart">🔄 Jugar de Nuevo</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../expedicion-base.js"></script>
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>
